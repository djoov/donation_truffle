{% extends "base.html" %}

{% block content %}

<div class="section-header">
    <h2>Admin Dashboard</h2>
    <p>Monitoring status kampanye dan blockchain.</p>
</div>

<div class="card" style="padding: 0; overflow: hidden;">
    <table style="width: 100%; border-collapse: collapse;">
        <thead style="background: #f8f9fa;">
            <tr>
                <th style="padding: 15px;">ID</th>
                <th style="padding: 15px;">Judul</th>
                <th style="padding: 15px;">Creator</th>
                <th style="padding: 15px;">Terkumpul</th>
                <th style="padding: 15px;">Status</th>
                <th style="padding: 15px;">Aksi</th>
            </tr>
        </thead>
        <tbody>
            {% for c in campaigns %}
            <tr style="border-bottom: 1px solid #eee;">
                <td style="padding: 15px;">#{{ c.id }}</td>
                <td style="padding: 15px; font-weight: 600;">{{ c.title }}</td>
                <td style="padding: 15px; font-family: monospace; color: #666;">{{ c.creator[:8] }}...</td>
                <td style="padding: 15px;">{{ c.totalDonations }} ETH</td>
                <td style="padding: 15px;">
                    <span class="badge" style="background: {{ '#fff3cd' if c.status_label == 'Pending' else '#d4edda' if c.status_label == 'Active' else '#f8d7da' }}; 
                          color: {{ '#856404' if c.status_label == 'Pending' else '#155724' if c.status_label == 'Active' else '#721c24' }};">
                        {{ c.status_label }}
                    </span>
                </td>
                <td style="padding: 15px;">
                    <div style="display: flex; gap: 5px;">
                        {% if c.status_code == 0 %} <!-- Pending Only -->
                            <form action="/ui/admin/action/approve/{{ c.id }}" method="POST">
                                <button class="button button-sm" style="background: #2E7D32;" title="Approve"><i class="fa-solid fa-check"></i></button>
                            </form>
                            <form action="/ui/admin/action/reject/{{ c.id }}" method="POST">
                                <button class="button button-sm" style="background: #C62828;" title="Reject"><i class="fa-solid fa-xmark"></i></button>
                            </form>
                        {% elif c.status_code == 1 %} <!-- Active -->
                             <form action="/ui/admin/action/disable/{{ c.id }}" method="POST">
                                <button class="button button-sm" style="background: #FF9800;" title="Disable"><i class="fa-solid fa-ban"></i></button>
                            </form>
                        {% else %}
                            <span style="color: #aaa;">-</span>
                        {% endif %}
                    </div>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}